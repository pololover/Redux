# Redux

Redux
-----
context API와 마찬가지로 Cross-Component State와 App-Wide State를 관리하는데 도움을 주는 상태관리 라이브러리.


Context API의 한계
----
1. 애플리케이션 규모가 커질 수록 JSX코드 내부의 깊이가 깊어진다. -> 관리가 힘들어짐.      
2. 인증과 같은 부분은 변경횟수가 적어 문제가 되지 않지만 여러번의 변경횟수가 있다면 Redux에 비해 성능적으로 기대하기 힘듬.

Store, Reducer
----
스토어는 데이터를 관리하는 공간이다. 그리고 스토어에서 사용하는 데이터는 리듀서 함수가 결정한다.    
이유는 리듀서 함수가 새 상태 스냅숏을 보내주기 때문이다. 초기상태에 리듀서는 스토어로 디폴트 값을 보내준다.     
Reducer는 항상 자바스크립트 순수함수여야한다. 즉 외부값에 영향을 주거나 받지 않는다. 또한 사이드 이펙트가 존재하면 안 된다          
순수함수를 사용하는 이유는 항상 예상되는 특정한 객체를 리턴해야하기 때문. (state를 직접 바꾸는 로직이 들어가면 순수함수가 아니다.)     
스토어와 작업하는 건 리듀서기때문에 redux.createStore(countReducer)와 같은 부분이 필히 선행되어야함.


Redux 흐름
-----
1. 유저가 버튼 클릭     
2. 앱은 유저의 행동에 맞는 디스패치를 실행해 액션을 일으킴
3. 스토어는 이전 상태와 현재 액션으로 리듀서 함수를 실행하고, 리턴값을 새로운 상태로 저장
4. 스토어는 스토어를 구독하고 있던 UI들에게 업데이트 되었다고 알려줌.
5. 스토어의 데이터가 필요한 각각의 UI들은 필요한 상태가 업데이트 되었는지 확인.
6. 데이터가 변경된 각 구성요소는 새 데이터로 강제로 다시 렌더링하므로 화면에 표시되는 내용을 업데이트 함.


Redux 세가지 원칙
-----
1. 하나의 애플리케이션 안에는 하나의 스토어만 사용 -> 디버깅이 쉬워지고 서버와의 직렬화가 되어 쉽게 데이터 전달이 가능해짐
2. 상태를 변화시키는 건 오직 액션만. -> 상태를 변화시키려는 의도파악이 가능하며 상태 변경에 대한 추적이 용이해짐.
3. 변화를 일으키는 리듀서 함수는 순수함수.

React 앱에서의 Redux
-----
React 앱 내에서 redux를 사용하는 방법으로 react-redux 패키지가 있다. 이를 사용하는 방법은 사용하고자하는 컴포넌트(자식을 포함하는 혹은 포함하지 않아도 되는)를 Provider로 감싸주는 것이다. Provider는 import를 통해 react-redux에서 가져온 컴포넌트이다. 이후 Provider에 prop으로 store를 설정하면 dispatch, store접근 등 할 수 있게된다.


useSelector
-----
useSelector는 react-redux에서 제공하는 훅이다.     
스토어에는 수많은 데이터들이 있고 프로덕션 레벨에서는 세부적인 데이터에 접근하는게 필요할텐데 이를 쉽게 접근할 수 있는 훅이useSelector이다. 또한 state가 변경될 때 알아서 트리거를 해주는 역할을 한다.     
즉 subscript을 자동으로 해주는 게 useSelector훅이다. 
